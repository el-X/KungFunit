<md-toolbar layout="row" md-whiteframe="4" style="background-color: #fafafa;" hide-sm hide-xs>
    <div class="md-toolbar-tools" layout="row" layout-align="start stretch">
        <!-- Quantity selector -->
        <md-input-container class="unit-selector" flex="20">
            <label>Quantity</label>
            <md-select ng-model="vm.selectedQuantity">
                <!-- select the first quantity -->
                <md-optgroup ng-repeat="class in vm.unitClasses" label="{{class.name}}">
                    <md-option ng-repeat="quantity in class.quantities" ng-value="quantity" ng-selected="$index == 1">
                        {{quantity.name}}
                    </md-option>
                </md-optgroup>
            </md-select>
        </md-input-container>
        <!-- Source unit selector -->
        <md-input-container class="md-subhead unit-selector" flex-offset="10" flex="15">
            <label>Source unit</label>
            <md-select ng-model="vm.selectedSourceUnit" ng-disabled="!vm.selectedQuantity" ng-change="changed = true">
                <!-- select the first unit -->
                <md-option ng-repeat="unit in vm.selectedQuantity.units" ng-value="unit.symbol" ng-selected="$first">
                    {{unit.name}}
                </md-option>
            </md-select>
        </md-input-container>
        <!-- Target unit selector -->
        <md-input-container class="md-subhead unit-selector" flex-offset="10" flex="15">
            <label>Target unit</label>
            <md-select ng-model="vm.selectedTargetUnit" ng-disabled="!vm.selectedQuantity" ng-change="changed = true">
                <!-- select the second unit -->
                <md-option ng-repeat="unit in vm.selectedQuantity.units" ng-value="unit.symbol" ng-selected="$index == 1">
                    {{unit.name}}
                </md-option>
            </md-select>
        </md-input-container>
        <!-- Datepicker -->
        <div layout="column" layout-align="center end" flex-offset="10" flex="20">
            <div ng-show="vm.selectedQuantity.name == 'Currency'">
                <div class="dataset-datepicker-label unselectable-item">Currency rate date</div>
                <md-datepicker class="dataset-datepicker" ng-model="vm.date"
                               ng-change="changed = true"
                               md-min-date="vm.minDate"
                               md-max-date="vm.maxDate"
                               md-open-on-focus
                               required>
                </md-datepicker>
            </div>
        </div>
    </div>
</md-toolbar>
<div layout="row" layout-align="center stretch">
    <md-input-container class="md-block dataset-input-container" flex="50">
        <textarea class="dataset-input-source" rows="32" name="test" ng-model="vm.sourceDataset"
                  ng-change="changed = true"
                  placeholder="Place your comma-separated list of values here."
                  aria-label="Source Dataset"
                  md-no-autogrow>
        </textarea>
        <div ng-messages="test.$error" multiple>
            <div ng-message="pattern">This is required!</div>
        </div>
    </md-input-container>
    <md-button class="md-fab convert-button"
               ng-class="vm.invalid ? 'convert-button-invalid' : 'convert-button-valid'"
               ng-click="vm.convertDataset(); changed = false;"
               ng-disabled="!(!(!vm.sourceDataset || vm.sourceDataset.length === 0) && vm.selectedQuantity && changed)">
        <md-tooltip md-direction="left">CONVERT</md-tooltip>
        <md-icon>play_arrow</md-icon>
    </md-button>
    <md-input-container class="md-block dataset-input-container" flex="50">
        <textarea class="dataset-input-target" rows="32" ng-model="vm.targetDataset" aria-label="Target Dataset"
                  md-no-autogrow readonly>
        </textarea>
    </md-input-container>
</div>
